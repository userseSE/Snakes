# 双人贪吃蛇系统
## 一、使用方式
- 可在Windows或Ubuntu环境下
- 需要先运行test_server.exe，再运行一个或者两个test_client.exe文件。
- 例如：先运行"Snakes\bin\test_server.exe"，再运行"Snakes\bin\test_client.exe"和"Snakes\test_client2\test_client2.exe"程序
- 运行时需要：libzmq-mt-4_3_5.dll文件（动态链接库）、key.json文件（服务端存放的用户信息库）、config_server.json文件（服务端的ip和端口）和test_server.exe文件放在同一文件夹中；libzmq-mt-4_3_5.dll文件、clientInfo.json文件（客户端登入时使用的账号密码）、config_client.json文件（客户端的ip和端口）和test_client.exe文件放在同一文件夹中。
- 在各自的client端，可以用方向键控制的蛇的移动
## 二、构建系统的环境
- 编辑器：Visual Studio Code (vscode)
- 构建工具：CMake
- 编译器：Clang
## 三、使用的第三方库
- cppzmq：用于网络通信，支持与其他客户端和服务器进行数据传输。
- json：用于处理JSON格式的数据，方便进行配置文件的读取和解析。
- Flecs：用于实现面向数据的设计方式，便于并行处理数据。特别适用于计算密集型场景。
- raylib：提供图形渲染和窗口管理功能，用于游戏界面的展示。
## 四、软件逻辑
### 贪吃蛇部分
实现了贪吃蛇的部分游戏逻辑，包括蛇的移动和食物的生成功能。
### 网络部分
处理客户端和服务器之间的通信，通过cppzmq库进行同步阻塞式通信。目前客户端使用的是同步阻塞式通讯，但建议将服务器端改写为异步非阻塞式通讯，以避免阻塞整个线程。

图像传递的数据较大、客户端目前用的是同步阻塞式通讯（服务端那样写成异步非阻塞，就基本不会卡）、再recv的时候会阻塞整个线程，recv阻挡了键盘输入事件的处理）
## 五、设计思路优势
- 面向数据的方式容易并行，适合计算量大的场景。系统没有事件，而是处理一类数据的向量。对于传递大量图像数据的场景，该设计方式特别有效。
- 插件和数据组合，各个功能之间的耦合度极大降低。系统的功能通过插件和数据的组合实现，使得模块之间的解耦程度很高，易于扩展和维护。
## 六、未来工作
- 碰撞检测：目前系统还未完成碰撞检测功能，将进一步完善贪吃蛇部分，添加碰撞检测逻辑，确保蛇与边界、自身、以及其他物体的正确交互。
- 登录页面：目前为了方便数据的传输，服务器和客户端的账号密码都以Json文件形式存放在可执行文件的同一目录下，将来可以设计客户端通过输入账号密码登录的功能，以及采用更合理的方式在服务端存储用户数据库。